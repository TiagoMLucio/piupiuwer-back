model User {
  id         String     @id @default(uuid())
  username   String     @unique
  email      String     @unique
  password   String
  firstName  String
  lastName   String
  birthDate  String
  about      String?
  avatar     String?
  pius       Piu[]
  favorite   Favorite[]
  following  Follows[]  @relation("follower")
  followedBy Follows[]  @relation("following")
  created_at DateTime   @default(now())
  updated_at DateTime   @updatedAt

  @@map("users")
}

model Piu {
  id       String     @id @default(uuid())
  user_id  String
  user     User       @relation(fields: [user_id], references: [id], onDelete: Cascade, onUpdate: Cascade)
  Favorite Favorite[]
}

model Follows {
  follower    User   @relation("follower", fields: [followerId], references: [id], onDelete: Cascade, onUpdate: Cascade)
  followerId  String
  following   User   @relation("following", fields: [followingId], references: [id], onDelete: Cascade, onUpdate: Cascade)
  followingId String

  @@unique(fields: [followerId, followingId], name: "followsId")
  @@map("follows")
}

model Favorite {
  id      String @id @default(uuid())
  user_id String
  user    User   @relation(fields: [user_id], references: [id], onDelete: Cascade, onUpdate: Cascade)
  piu_id  String
  piu     Piu    @relation(fields: [piu_id], references: [id], onDelete: Cascade, onUpdate: Cascade)

  @@map("favorites")
}
